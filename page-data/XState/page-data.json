{
    "componentChunkName": "component---node-modules-gatsby-theme-blog-node-modules-gatsby-theme-blog-core-src-templates-post-query-js",
    "path": "/XState/",
    "result": {"data":{"site":{"siteMetadata":{"title":"Tech Sharing","social":[{"name":"Twitter","url":"https://twitter.com/gatsbyjs"},{"name":"GitHub","url":"https://github.com/gatsbyjs"}]}},"blogPost":{"id":"a4ac6232-d4e2-571e-9072-9104f87e2a8c","excerpt":"JavaScript state machines and statecharts.","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"XState\",\n  \"excerpt\": \"JavaScript state machines and statecharts.\",\n  \"date\": \"2021-10-10\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Developing user interfaces \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"is not easy\"), \".\"), mdx(\"p\", null, \"I\\u2019m going to start with a post from \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://dev.to/davidkpiano/no-disabling-a-button-is-not-app-logic-598i\"\n  }, \"No, disabling a button is not app logic\"), \" writted by \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"David K\"), \". in 2019 to introduce what\\u2019s the XState and what can we use it to do.\\nA book \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Constructing the User Interface with Statecharts\"), \", written by \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Ian Horrocks\"), \" in 1999 said:\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"User interface development tools are very powerful. They can be used to construct large and complex user interfaces, with only a relatively small amount of code written by an application developer. And yet, despite the power of such tools and the relatively small amount of code that is written, user interface software often has the following characteristics:\\nthe code can be difficult to understand and review thoroughly:\\nthe code can be difficult to test in a systematic and thorough way;\\nthe code can contain bugs even after extensive testing and bug fixing;\\nthe code can be difficult to enhance without introducing unwanted side-effects;\\nthe quality of the code tends to deteriorate as enhancements are made to it.\\nDespite the obvious problems associated with user interface development, \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"little effort has been made to improve the situation\"), \". Any practitioner who has worked on large user interface projects will be familiar with many of the above characteristics, which are \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"symptomatic of the way in which the software is constructed\"), \".\")), mdx(\"p\", null, \"This was written over 20 years ago and yet it echoes the same sentiments that many developers feel today about the state of app development. Why is that?\"), mdx(\"p\", null, \"State Machines is not a new concept bing in UI development, you can see the post \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://medium.com/@asolove/pure-ui-control-ac8d1be97a8d\"\n  }, \"Pure UI Control\"), \", already have some thinkings.\"), mdx(\"h3\", {\n    \"id\": \"finite-state-machines\"\n  }, \"Finite State Machines\"), mdx(\"p\", null, \"The finite state machine is one of the oldest models of computation in computer science.\\nthey are a visual and mathematical way of modeling stateful logic using 3 main building blocks:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Finite states,\"), \" which represent different behaviors\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Events\"), \", which represent something that happened that can change state\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Transitions,\"), \" which represent how the state can change and what actions are executed when an event is received\")), mdx(\"p\", null, \"Quick go through the mathematic of \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://en.wikipedia.org/wiki/Finite-state_machine\"\n  }, \"Finite State Machines\"), \".\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Next, we\\u2019ll explore this with a simple example: fetching data in a React component.\")), mdx(\"p\", null, \"In Finite State Machines, it\\u2019s look like:\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"628px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"44.05797101449275%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABLElEQVQoz31R23KsIBD0XbkTYVVkMbsmXpL//7tODYmGWKfOQ1cP0zMw9FRCCCilwDkHxSWklJlJK/X/1VZaayzLAmJKEpNgjDkLb7cbnHM5Z7SGtRaSNK2hrIEuavOF0zRhnmfs+46UUj5TTPx8PrGuK7Zty+f3ZcH++YHwmhCmhLdtRZju3xcKiYoCxhhijHg8HhiGIU90TDmOY9ame0IIAUJKcCFgXQvfd+hDgO+6nKepKxrzAE1LII9O/xhD0zRolQZv2K9Gvl78y18uE6fpxSIoZpxjcB73GOG9P5vLvnMp120RvH1B5zx679G3LZyx8Nbm79Ny/rXlA9U5yQ/Ih9E5pBiRxhFzP6DVOvtc13Xma0+JigoOUILYKpUvaY3OD9RN86ep7LniCxz63A0mFdqlAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"image-20211011024953642\",\n    \"title\": \"image-20211011024953642\",\n    \"src\": \"/tech-share/static/6b89e19834ed1c06a609636ef957a7a5/3d84d/image-20211011024953642.png\",\n    \"srcSet\": [\"/tech-share/static/6b89e19834ed1c06a609636ef957a7a5/e4d6b/image-20211011024953642.png 345w\", \"/tech-share/static/6b89e19834ed1c06a609636ef957a7a5/3d84d/image-20211011024953642.png 628w\"],\n    \"sizes\": \"(max-width: 628px) 100vw, 628px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  }), \"\\n    \")), mdx(\"p\", null, \"Now I want to add some new features, I want to able to retry when error happen:\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"561px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"43.76811594202899%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABSUlEQVQoz21SbZuCIBD0a6VY8iaiSJ56nmX1///c3LN0ktfTh4FdYIfZgaQsSxwOBzDGAvI8R5ZlMaaZ8nVtjWkvZ/m/uuPxiGSeZzjn0LYtmqaB1hp934e4KAp470PedR2MMSH+maZwTpoS2tUw3kFoFUgTIpqmCff7PRAPwxBIaJ0uo/zxeGC53dAPA6xr0J496q8zmq8z5usV4/QNVZmnQlJBaqy1qKoKUsrYGtlxuVyglIKzNu4RqJhUcSXBpUTB+VPh6tnLG4ZlWQLoIs55IDBCYrfbRbKnh+yF1UMatqANIURoXyqF9O8BvK0xjiMqYyLpp9qgcAvFObQQqI2BkRKiKMKspQy+Uvvrq35CsnqSMYbidEKrNTrvMfQ9JtegryxOeR6U7vf7+GXWunck2yRjGUouYJVCJWXwLU3T+Afjubd8S/gLyqnfxqt0rqMAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"image-20211011025733789\",\n    \"title\": \"image-20211011025733789\",\n    \"src\": \"/tech-share/static/862b0b9eeaf0d2952317ac691afe34f5/410f3/image-20211011025733789.png\",\n    \"srcSet\": [\"/tech-share/static/862b0b9eeaf0d2952317ac691afe34f5/e4d6b/image-20211011025733789.png 345w\", \"/tech-share/static/862b0b9eeaf0d2952317ac691afe34f5/410f3/image-20211011025733789.png 561w\"],\n    \"sizes\": \"(max-width: 561px) 100vw, 561px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  }), \"\\n    \")), mdx(\"p\", null, \"You may find there may not the only \\u201CREJECT\\u201D reason that can trigger error, \\u201CTIMEOUT\\u201D still need to be considerable:\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"570px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"46.3768115942029%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABTUlEQVQoz11S2Y6DMAzkfaGQhBwEcnBsS6mq/v/XzcrWpqJ9GGwcezKZpDLGYJom1HWNtm3fuFwuH3nTNO8axe/1klchBLxeL8QYkXNmOOewLAtoTWuNbdtwu924NgwDjuPgvLcGNkwYlwwbPDohUBE7EVyv13fjPM+smgj3fee1x+OB5/OJkCKc95hygl8y8rpiPw6MKUJIgapI9d4ziFwpxTWyIaWEddtgtYZ3jnvIJrKACJTREEpBKoWu61DRh0ANxSeKRdnoPZMrIWCU4k3cP3H75SUTnn8KitF+GCCEQN006KXEmjP2+51rpJI2JBvIZ+r/IDzf2GgM4jgih4BEarSG63u2goZpkC5HSsnk5/mqPIECOm6yFr85Y44RB8Vpwk/9w8clMjoykZ1tImKKVSme/ZNdh14IyLaF6XsM3rMygrWWlZT+MlPwB2Mz4LXJ7LrCAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"image-20211011025857123\",\n    \"title\": \"image-20211011025857123\",\n    \"src\": \"/tech-share/static/9ffd5856f1841e425f5da7e632a9b182/432e7/image-20211011025857123.png\",\n    \"srcSet\": [\"/tech-share/static/9ffd5856f1841e425f5da7e632a9b182/e4d6b/image-20211011025857123.png 345w\", \"/tech-share/static/9ffd5856f1841e425f5da7e632a9b182/432e7/image-20211011025857123.png 570w\"],\n    \"sizes\": \"(max-width: 570px) 100vw, 570px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  }), \"\\n    \")), mdx(\"p\", null, \"When it comes to adding complexity and extending it with features, also be abled to describe it with your team members, designers and anyone interested with you app, have a visual model like this is actually very very helpful for us to organize our app\\u2019s logic and exactly know what\\u2019s going on.\"), mdx(\"h3\", {\n    \"id\": \"demo-dogfetcher\"\n  }, \"DEMO: DogFetcher\"), mdx(\"p\", null, \"Suppose we have a DogFetcher component that has a button that you can click to fetch a random dog. When the button is clicked, a GET request is made to the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://dog.ceo/dog-api/\"\n  }, \"Dog API\"), \", and when the dog is received, we show it off in an \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<img />\"), \" tag.\"), mdx(\"p\", null, \"A typical implementation with React Hooks might look like this:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\"\n  }, \"function DogFetcher() {\\n  const [isLoading, setIsLoading] = useState(false);\\n  const [dog, setDog] = useState(null);\\n\\n  return (\\n    <div>\\n      <figure className=\\\"dog\\\">{dog && <img src={dog} alt=\\\"doggo\\\" />}</figure>\\n\\n      <button\\n        onClick={() => {\\n          setIsLoading(true);\\n          fetch(`https://dog.ceo/api/breeds/image/random`)\\n            .then(data => data.json())\\n            .then(response => {\\n              setDog(response.message);\\n              setIsLoading(false);\\n            });\\n        }}\\n      >\\n        {isLoading ? \\\"Fetching...\\\" : \\\"Fetch dog!\\\"}\\n      </button>\\n    </div>\\n  );\\n}\\n\")), mdx(\"p\", null, \"This works, but there\\u2019s one immediate problem: clicking the button more than once (while a dog is loading)\\nwill display one dog briefly, and then replace that dog with another dog. That\\u2019s not very considerate to the first dog.\"), mdx(\"p\", null, \"The typical solution to this is to add a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"disabled={isLoading}\"), \" attribute to the button:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\"\n  }, \"function DogFetcher() {\\n  // ...\\n\\n  <button\\n    onClick={() => {\\n      // ... excessive amount of ad-hoc logic\\n    }}\\n    disabled={isLoading}\\n  >\\n    {isLoading ? \\\"Fetching...\\\" : \\\"Fetch dog!\\\"}\\n  </button>\\n\\n  // ...\\n}\\n\")), mdx(\"p\", null, \"This also works.\"), mdx(\"h3\", {\n    \"id\": \"what-can-possibly-go-wrong\"\n  }, \"What can possibly go wrong?\"), mdx(\"p\", null, \"Currently, the logic reads like this:\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"When the button is clicked, fetch a new random dog, and set a flag to make sure that the button cannot be clicked again to fetch a dog while one is being fetched.\")), mdx(\"p\", null, \"However, the logic you \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"really\"), \" want is this:\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"When a new dog is requested, fetch it and make sure that another dog can\\u2019t be fetched at the same time.\")), mdx(\"p\", null, \"See the difference? The desired logic is completely separate from the button being clicked; it doesn\\u2019t matter how the request is made; it only matters what logic happens afterwards.\"), mdx(\"p\", null, \"Suppose that you want to add the feature that double-clicking the image loads a new dog. What would you have to do?\"), mdx(\"p\", null, \"It\\u2019s all too easy to forget to add the same \\u201Cguard\\u201D logic on figure (after all, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<figure disabled={isLoading}>\"), \" won\\u2019t work, go figure), but let\\u2019s assume you remembers to add this logic:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\"\n  }, \"function DogFetcher() {\\n  const [isLoading, setIsLoading] = useState(false);\\n  const [dog, setDog] = useState(null);\\n\\n  function fetchDog() {\\n    if (isLoading) return;\\n\\n    setIsLoading(true);\\n    fetch(`https://dog.ceo/api/breeds/image/random`)\\n      .then(data => data.json())\\n      .then(response => {\\n        setDog(response.message);\\n        setIsLoading(false);\\n      });\\n  }\\n\\n  return (\\n    <div>\\n      <figure className=\\\"dog\\\" onDoubleClick={fetchDog}>\\n        {dog && <img src={dog} alt=\\\"doggo\\\" />}\\n      </figure>\\n\\n      <button onClick={fetchDog}>\\n        {isLoading ? \\\"Fetching...\\\" : \\\"Fetch dog!\\\"}\\n      </button>\\n    </div>\\n  );\\n}\\n\")), mdx(\"p\", null, \"In reality, you can think about this as any use-case where some sort of \\u201Ctrigger\\u201D can happen from multiple locations.\"), mdx(\"h3\", {\n    \"id\": \"now-we--try-to-adding-features-and-complexity\"\n  }, \"Now we  try to adding features and complexity\"), mdx(\"p\", null, \"Now let\\u2019s see what happens when we want to add basic \\u201Cfeatures\\u201D, such as:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"If fetching a dog fails, an \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"error\"), \" should be shown.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Fetching a dog should be \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"cancellable\"), \".\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\"\n  }, \"function DogFetcher() {\\n  const [isLoading, setIsLoading] = useState(false);\\n  const [error, setError] = useState(null);\\n  const [canceled, setCanceled] = useState(false);\\n  const [dog, setDog] = useState(null);\\n\\n  function fetchDog() {\\n    setCanceled(false);\\n    setError(null);\\n    setIsLoading(true);\\n\\n    fetchRandomDog()\\n      .then(response => {\\n        // This should work... but it doesn't!\\n        if (canceled) return;\\n\\n        setIsLoading(false);\\n        setDog(response.message);\\n      })\\n      .catch(error => {\\n        setIsLoading(false);\\n        setCanceled(false);\\n        setError(error);\\n      });\\n  }\\n\\n  function cancel() {\\n    setIsLoading(false);\\n    setCanceled(true);\\n  }\\n\\n  return (\\n    <div>\\n      {error && <span style={{ color: \\\"red\\\" }}>{error}</span>}\\n      <figure className=\\\"dog\\\" onDoubleClick={fetchDog}>\\n        {dog && <img src={dog} alt=\\\"doggo\\\" />}\\n      </figure>\\n\\n      <button onClick={fetchDog}>\\n        {isLoading ? \\\"Fetching...\\\" : \\\"Fetch dog!\\\"}\\n      </button>\\n      <button onClick={cancel}>Cancel</button>\\n    </div>\\n  );\\n}\\n\")), mdx(\"h3\", {\n    \"id\": \"lets-try-usereducer-and-useeffect-hooks-to-reducing-complexity\"\n  }, \"Let\\u2019s try \", mdx(\"inlineCode\", {\n    parentName: \"h3\"\n  }, \"useReducer\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"h3\"\n  }, \"useEffect\"), \" hooks to reducing complexity\"), mdx(\"p\", null, \"Instead of haphazardly adding Boolean flags everywhere, let\\u2019s clean this up with the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useReducer\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useEffect\"), \" hooks. These hooks are useful because they express some concepts that lead to better logic organization:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"useReducer\"), \" hook uses reducers, which return the next state given the current state and some event that just occurred.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"useEffect\"), \" hook synchronizes effects with state.\")), mdx(\"p\", null, \"To help us organize the various app states, let\\u2019s define a few and put them under a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"status\"), \" property:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"An \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"\\\"idle\\\"\"), \" status means that nothing happened yet.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"A \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"\\\"loading\\\"\"), \" status means that the dog is currently being fetched.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"A \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"\\\"success\\\"\"), \" status means that the dog was successfully fetched.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"A \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"\\\"failure\\\"\"), \" status means that an error occurred while trying to fetch the dog.\")), mdx(\"p\", null, \"Now let\\u2019s define a few events that can happen in the app. Keep in mind: these events can happen from \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"anywhere\"), \", whether it\\u2019s initiated by the user or somewhere else:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"A \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"\\\"FETCH\\\"\"), \" event indicates that fetching a dog should occur.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"A \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"\\\"RESOLVE\\\"\"), \" event with a \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"data\"), \" property indicates that a dog was successfully fetched.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"A \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"\\\"REJECT\\\"\"), \" event with an \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"error\"), \" property indicates that a dog was unable to be fetched for some reason.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"A \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"\\\"CANCEL\\\"\"), \" event indicates that an in-progress fetch should be canceled.\")), mdx(\"p\", null, \"Great! Now let\\u2019s write our reducer:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\"\n  }, \"function dogReducer(state, event) {\\n  switch (event.type) {\\n    case \\\"FETCH\\\":\\n      return {\\n        ...state,\\n        status: \\\"loading\\\"\\n      };\\n    case \\\"RESOLVE\\\":\\n      return {\\n        ...state,\\n        status: \\\"success\\\",\\n        dog: event.data\\n      };\\n    case \\\"REJECT\\\":\\n      return {\\n        ...state,\\n        status: \\\"failure\\\",\\n        error: event.error\\n      };\\n    case \\\"CANCEL\\\":\\n      return {\\n        ...state,\\n        status: \\\"idle\\\"\\n      };\\n    default:\\n      return state;\\n  }\\n}\\n\\nconst initialState = {\\n  status: \\\"idle\\\",\\n  dog: null,\\n  error: null\\n};\\n\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\"\n  }, \"function DogFetcher() {\\n  const [state, dispatch] = useReducer(dogReducer, initialState);\\n  const { error, dog, status } = state;\\n\\n  useEffect(() => {\\n    // ... fetchDog?\\n  }, [state.status]);\\n\\n  return (\\n    <div>\\n      {error && <span style={{ color: \\\"red\\\" }}>{error}</span>}\\n      <figure className=\\\"dog\\\" onDoubleClick={() => dispatch({ type: \\\"FETCH\\\" })}>\\n        {dog && <img src={dog} alt=\\\"doggo\\\" />}\\n      </figure>\\n\\n      <button onClick={() => dispatch({ type: \\\"FETCH\\\" })}>\\n        {status === \\\"loading\\\" ? \\\"Fetching...\\\" : \\\"Fetch dog!\\\"}\\n      </button>\\n      <button onClick={() => dispatch({ type: \\\"CANCEL\\\" })}>Cancel</button>\\n    </div>\\n  );\\n}\\n\")), mdx(\"p\", null, \"Reducer can be \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"reused and independently testes\"), \".\"), mdx(\"p\", null, \"However, the question remains: how do we execute the side-effect of actually fetching the dog? Well, since the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useEffect\"), \" hook is meant for synchronizing effects with state, we can synchronize the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"fetchDog()\"), \" effect with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"status === 'loading'\"), \", since \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"'loading'\"), \" means that that side-effect is being executed anyway:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\"\n  }, \"/ ...\\n  useEffect(() => {\\n    if (state.status === \\\"loading\\\") {\\n      let canceled = false;\\n\\n      fetchRandomDog()\\n        .then(data => {\\n          if (canceled) return;\\n          dispatch({ type: \\\"RESOLVE\\\", data });\\n        })\\n        .catch(error => {\\n          if (canceled) return;\\n          dispatch({ type: \\\"REJECT\\\", error });\\n        });\\n\\n      return () => {\\n        canceled = true;\\n      };\\n    }\\n  }, [state.status]);\\n// ...\\n\")), mdx(\"p\", null, \"The logic above works great. We\\u2019re able to:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Click the \\u201CFetch dog\\u201D button to fetch a dog\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Display a random dog when fetched\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Show an error if the dog is unable to be fetched\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Cancel an in-flight fetch request by clicking the \\u201CCancel\\u201D button\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Prevent more than one dog from being fetched at the same time\")), mdx(\"h3\", {\n    \"id\": \"we-dont-need-to-add-disabled-attribute\"\n  }, \"We don\\u2019t need to add \\u201Cdisabled\\u201D attribute\"), mdx(\"p\", null, \"\\u2026 all without having to put any logic in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<button disabled={...}>\"), \" attribute. In fact, we completely forgot to do so anyway, and the logic still works!\"), mdx(\"p\", null, \"This is how you know your logic is robust; when it works, regardless of the UI. Whether the \\u201CFetch dog\\u201D button is disabled or not, clicking it multiple times in a row won\\u2019t exhibit any unexpected behavior.\"), mdx(\"p\", null, \"Also, because most of the logic is delegated to a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"dogReducer\"), \" function defined \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"outside\"), \" of your component, it is:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"easy to make into a custom hook\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"easy to test\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"easy to reuse in other components\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"easy to reuse in other \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"frameworks\"))), mdx(\"p\", null, \"Check the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://codesandbox.io/s/gifted-surf-0jmnz?from-embed\"\n  }, \"final result\")), mdx(\"h3\", {\n    \"id\": \"pushing-effects-to-the-side\"\n  }, \"Pushing effects to the side\"), mdx(\"p\", null, \"There\\u2019s one lingering thought, though\\u2026 is \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useEffect()\"), \" the ideal place to put a side effect, such as fetching?\"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Maybe, maybe not.\")), mdx(\"p\", null, \"Honestly, in most use-cases, it works, and it works fine. But it\\u2019s difficult to test or separate that effect from your component code. And with the upcoming Suspense and Concurrent Mode features in React, the recommendation is to execute these side-effects when some action triggers them, rather than in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useEffect()\"), \". This is because the official React advice is:\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"If you\\u2019re working on a data fetching library, there\\u2019s a crucial aspect of Render-as-You-Fetch you don\\u2019t want to miss. \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"We kick off fetching before rendering.\")), mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://reactjs.org/docs/concurrent-mode-suspense.html#start-fetching-early\"\n  }, \"https://reactjs.org/docs/concurrent-mode-suspense.html#start-fetching-early\"))), mdx(\"p\", null, \"Fetch-on-Render -> Render-as-You-Fetch\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Fetch-on-Render:\")), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"find no data on render, then show loading\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"componentDidMount request API\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"data back then rerender\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Cons:\")), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"the whole process is serial, render first fetch after, it costs the deeper component is the later fetch data happen\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"fetch combine to render, means some lazy component also be delayed fetch, costs the burden of the Component loaded on demand\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Render-as-You-Fetch:\"), \"\\nSeparate data dependency from view. What data do we need, how to fetch data, Separate from when to render.\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Parallel data and view trees\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Fetch in event handlers\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Load data incrementally\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Treat code like data\")), mdx(\"p\", null, \"All of this can happen outside of the component render cycle, because it doesn\\u2019t necessarily concern the view. Unfortunately, React doesn\\u2019t have a built-in way (yet?) to handle state management, side-effects, data fetching, caching etc. outside of the components (we all know \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://relay.dev/docs/getting-started/step-by-step-guide/\"\n  }, \"Relay\"), \" is not commonly used), so let\\u2019s explore one way we can accomplish this completely outside of the component.\"), mdx(\"p\", null, \"See \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://reactjs.org/blog/2019/11/06/building-great-user-experiences-with-concurrent-mode-and-suspense.html\"\n  }, \"https://reactjs.org/blog/2019/11/06/building-great-user-experiences-with-concurrent-mode-and-suspense.html\")), mdx(\"h3\", {\n    \"id\": \"using-a-state-machine\"\n  }, \"Using a state machine\"), mdx(\"p\", null, \"In this case, we\\u2019re going to use a state machine to manage and orchestrate state. If you\\u2019re new to state machines, just know that they feel like your typical Redux reducers with a few more \\u201Crules\\u201D. Those rules have some powerful advantages, and are also the mathematical basis for how literally every computer in existence today works. So they might be worth learning.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\"\n  }, \"import { Machine, assign } from \\\"xstate\\\";\\nimport { useMachine } from \\\"@xstate/react\\\";\\n\\n// ...\\n\\nconst dogFetcherMachine = Machine({\\n  id: \\\"dog fetcher\\\",\\n  initial: \\\"idle\\\",\\n  context: {\\n    dog: null,\\n    error: null\\n  },\\n  states: {\\n    idle: {\\n      on: { FETCH: \\\"loading\\\" }\\n    },\\n    loading: {\\n      invoke: {\\n        src: () => fetchRandomDog(),\\n        onDone: {\\n          target: \\\"success\\\",\\n          actions: assign({ dog: (_, event) => event.data.message })\\n        },\\n        onError: {\\n          target: \\\"failure\\\",\\n          actions: assign({ error: (_, event) => event.data })\\n        }\\n      },\\n      on: { CANCEL: \\\"idle\\\" }\\n    },\\n    success: {\\n      on: { FETCH: \\\"loading\\\" }\\n    },\\n    failure: {\\n      on: { FETCH: \\\"loading\\\" }\\n    }\\n  }\\n});\\n\")), mdx(\"p\", null, \"how the machine looks like our previous reducer, with a couple of differences:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"It looks like some sort of configuration object instead of a switch statement\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"We\\u2019re matching on the \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"state\"), \" first, instead of the \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"event\"), \" first\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"We\\u2019re invoking the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"fetchRandomDog()\"), \" promise inside the machine!\")), mdx(\"p\", null, \"Don\\u2019t worry; we\\u2019re not actually executing any side-effects inside of this machine. In fact, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"dogFetcherMachine.transition(state, event)\"), \" is a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"pure function\"), \" that tells you the next state given the current state and event. Seems familiar, huh?\"), mdx(\"p\", null, \"Furthermore, I can copy-paste this exact machine and \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://stately.ai/viz\"\n  }, \"visualize it in XState Viz\"), \":\"), mdx(\"p\", null, \"So what does our component code look like now? Take a look:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\"\n  }, \"function DogFetcher() {\\n  const [current, send] = useMachine(dogFetcherMachine);\\n  const { error, dog } = current.context;\\n\\n  return (\\n    <div>\\n      {error && <span style={{ color: \\\"red\\\" }}>{error}</span>}\\n      <figure className=\\\"dog\\\" onDoubleClick={() => send(\\\"FETCH\\\")}>\\n        {dog && <img src={dog} alt=\\\"doggo\\\" />}\\n      </figure>\\n\\n      <button onClick={() => send(\\\"FETCH\\\")}>\\n        {current.matches(\\\"loading\\\") && \\\"Fetching...\\\"}\\n        {current.matches(\\\"success\\\") && \\\"Fetch another dog!\\\"}\\n        {current.matches(\\\"idle\\\") && \\\"Fetch dog\\\"}\\n        {current.matches(\\\"failure\\\") && \\\"Try again\\\"}\\n      </button>\\n      <button onClick={() => send(\\\"CANCEL\\\")}>Cancel</button>\\n    </div>\\n  );\\n}\\n\")), mdx(\"p\", null, \"Here\\u2019s the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"difference\"), \" between using a state machine and a reducer:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The hook signature for \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"useMachine(...)\"), \" looks almost the same as \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"useReducer(...)\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"No fetching logic exists inside the component; it\\u2019s all external!\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"There\\u2019s a nice \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"current.matches(...)\"), \" function that lets us customize our button text\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"send(...)\"), \" instead of \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"dispatch(...)\"), \"\\u2026 and it takes a plain string (Or an object, up to you).\")), mdx(\"p\", null, \"A state machine/statechart defines its transitions from the state because it answers the question: \\u201CWhich events should be handled \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"from this state?\"), \"\\u201D The reason that having \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<button disabled={isLoading}>\"), \" is fragile is because we admit that some \\u201CFETCH\\u201D event can cause an effect no matter which state we\\u2019re in, so we have to clean up our ~mess~ faulty logic by preventing the user from clicking the button while loading.\"), mdx(\"p\", null, \"Instead, it\\u2019s better to be proactive about your logic. Fetching should only happen when the app is not in some \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"\\\"loading\\\"\"), \" state, which is what is clearly defined in the state machine \\u2014 the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"\\\"FETCH\\\"\"), \" event is not handled in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"\\\"loading\\\"\"), \" state, which means it has no effect. Perfect.\"), mdx(\"h3\", {\n    \"id\": \"section-summary\"\n  }, \"Section Summary\"), mdx(\"p\", null, \"Disabling a button is not logic. Rather, it is a sign that logic is fragile and bug-prone. In my opinion, disabling a button should only be a visual cue to the user that clicking the button \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"will have no effect\"), \".\"), mdx(\"p\", null, \"So when you\\u2019re creating fetching logic (or any other kind of complex logic) in your applications, no matter the framework, ask yourself these questions:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"What are the concrete, finite states this app/component can be in? E.g., \\u201Cloading\\u201D, \\u201Csuccess\\u201D, \\u201Cidle\\u201D, \\u201Cfailure\\u201D, etc.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"What are all the possible events that can occur, regardless of state? This includes events that don\\u2019t come from the user (such as \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"\\\"RESOLVE\\\"\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"\\\"REJECT\\\"\"), \" events from promises)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Which of the finite states should handle these events?\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"How can I organize my app logic so that these events are handled properly in those states?\")), mdx(\"p\", null, \"A state machine might be a different, unfamiliar way of thinking about your application logic, but they\\u2019re extremely useful. Instead of approaching logic from a \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u201Cbottom-up\\u201D\"), \" perspective (imperatively doing things based on events), they take a \\u201D\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"top-down\\u201D\"), \" approach and primarily consider \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"behaviors\"), \", which describe how the logic will react to events in a given finite state (such as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"loading\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"editing\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"disabled\"), \", etc.).\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"882px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"50.43478260869565%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABHElEQVQoz3VSBwrEQAjc/38whfSE9N67xwgbkrvcguiKjmMRRETnedJd443jSE3TUNu2NAwDHcfBfugwDGnf958cPPEGluc52bZNruuyLorikaQoChf5C3h3lmVJfd+zDZ1lGTMKguDym6Z52TJfirijp2lKdV1zm2BVVRUDSv+2bRxnGAZN00RvTyAQrNCaZVkMgurLsvC81nXl9lAAcfCDIVhLHwRjQp5AdcxKVVXSNI3ZABQgELBFgud55Ps+M9N1nQk4jsOCcYA1CjxajuP40XLXdQyKyvM8X7MGQ/xfW0aQPAnYEgg2wMEM1cEE/u+lIFdi8FLezgaLQHvQSZJcQPezuW/5wfD7sKWNtqMo4uGDqfSDCWb277A/+YkEw/jZWhMAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"image-20211011035427167\",\n    \"title\": \"image-20211011035427167\",\n    \"src\": \"/tech-share/static/57558f3cde57c997af80a2122d63c96d/90712/image-20211011035427167.png\",\n    \"srcSet\": [\"/tech-share/static/57558f3cde57c997af80a2122d63c96d/e4d6b/image-20211011035427167.png 345w\", \"/tech-share/static/57558f3cde57c997af80a2122d63c96d/1e043/image-20211011035427167.png 690w\", \"/tech-share/static/57558f3cde57c997af80a2122d63c96d/90712/image-20211011035427167.png 882w\"],\n    \"sizes\": \"(max-width: 882px) 100vw, 882px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  }), \"\\n    \")), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"695px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"55.94202898550725%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB70lEQVQoz3VTS5PSQBDmR3i2/ImevenBs+XFi9Ze1ONqleXycAmwsAu1WYtiyWSBvCZZHkHyEEIImxA+awZB1oK+zEx3zzdff92TAYA4foCuGxiNbLiOg0UUMTfSNMV6vcbW2JmZ57owKMVsNsNwMIDn+9zPcjNsM/3tI5/LoVQqoyQUQYiMf5bC9z0E83DnYUCSJEEQBNTrDUwmk8eAURRhPLbhui5f52GIZrMJalB0ZBU6NWEqdzDVDhRFgappHMCyLETL5aNqMjhiFrXw4eN7fMq9RVf+iZOygtefS/hyesoJHLMMC/b7fUynU3ieh+XfFzs9Dbc3ZdSfP8OPNy/w5CXB01ctXF+LcJxNicFsBtseI5zPEQQB4iRBhgHdiCLy+QK63R7abQkyIajVakgeYliX5wjcX3hXkHFSUUCpgUajAUII7mSCs7MsikWB+8JwsS15zVmuVqsd9Xa7zS8Vyhc4LwooZr+h8P0rer0eBoMBz0niGKPRCNb9PVzX2ZS8Pxb7o2HbNqrVKkxqQNM03pjyRRXZbBZJkhzUb9cUttmfue1KKeUsGQvTNDk7URSh6zqPM81YVfv3jnZ5m8TEZnIMh8Md+8Ui5OCVSgWXV1cwDIo0XR8GPPQz/o8xvVqtW6iqytkSImHibDT8A0P8M49OZU7cAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"image-20211011035449635\",\n    \"title\": \"image-20211011035449635\",\n    \"src\": \"/tech-share/static/178370b48f6a166b073af9bf29abb4df/83b75/image-20211011035449635.png\",\n    \"srcSet\": [\"/tech-share/static/178370b48f6a166b073af9bf29abb4df/e4d6b/image-20211011035449635.png 345w\", \"/tech-share/static/178370b48f6a166b073af9bf29abb4df/1e043/image-20211011035449635.png 690w\", \"/tech-share/static/178370b48f6a166b073af9bf29abb4df/83b75/image-20211011035449635.png 695w\"],\n    \"sizes\": \"(max-width: 695px) 100vw, 695px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  }), \"\\n    \")), mdx(\"p\", null, \"Because of their explicit, declarative nature, state machines force you to think about the entire flow of your logic (including all the edge-cases), and make it virtually impossible to end up in an \\u201Cimpossible state\\u201D, as long as your model doesn\\u2019t allow it. Only defined transitions can happen; and if an unexpected transition happens, it means there is an implicit state machine where that transition \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"does\"), \" exist. The goal of state machines is to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"eliminate the implicit transitions\"), \" so that we can know exactly what can happen in any state for any potential event.\"), mdx(\"p\", null, \"State machines are \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"not a solution for everything\"), \" - just like anything else, they make sense for some use-cases (workflows, processes, modes, statuses, etc.) but not all use-cases. You shouldn\\u2019t use state machines everywhere, or even implement them explicitly all of the time (that\\u2019s what abstractions are for). They make a good refactor target, and they\\u2019re great for visually modeling your logic with pencil and paper, even if you ultimately decide not to use them in your code. But when working with logic that deals with explicit states, events, and transitions (which, surprise, tends to be the majority of app logic), state machines are a brilliant, natural solution.\"), mdx(\"h3\", {\n    \"id\": \"another-example-live-share-based-on-sate-machine\"\n  }, \"Another example Live Share based on Sate Machine\"), mdx(\"p\", null, \"Another example from the author of XState, David from Microsoft, he develop a VSCode plugin called Live Share, which people used to programming together and sharing about interview and coding.\"), mdx(\"p\", null, \"Because of the complex logic, David met so many bugs, most of from staying in one page and need to handle many states simultaneously\"), mdx(\"p\", null, \"Take the login for example, when user login became Signed In state, then it can do two things after, one is \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"share\"), \" a session and another is \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"join\"), \" a session. If login failed, back to login failed. The basic logic look like:\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"743px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"42.608695652173914%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABkElEQVQoz1WS25LiIBRFfZ0GEoFcISGJ6ajx0ra+zf9/2JoC7bH6YdUpoDjsvTmbuq4pioKyLFEqQymFkortdou1NmGMee4nMqSUaK3TWdvWfJ1nmtqipGCzLAu3241xHOk6T+gLvCs5Ho/c799cr1fmecb3La5rcF1FF1pO64nH48G6rhwPB6w2ZEqxGYaBaZoIsQ4Dh7Zm5xxN0ybVkadCmVTXPtCFgeXzk3EI6W7je6T4eDaMNqKFWPMsw0X72iCEIMuyZC02KouC0A20zuN9j8639M6yXyaa1mO0xmz1s2G8GIn5CKmQr5xivjGOaC3aKq3l72PiMDvEh8Qaw2ldedzuXNYLneveDd+N81/rYeo5nGeKwuJbxzJ5XF0ghUgqp93AvB9TNNHN5kfdmzyRIshzwtgz73eE0FMVFeKPRAqFMZq2aVn2M9MupIzVT4a/eVkXIr26Hlfu96flXOVkMkMJRec9l/OZ768bQx9SROlT4g/+xr4w/+cz1qqqsMZitcVok/ar1xRUr0mI/AN4oON6LHjJTQAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"image-20211011032746664\",\n    \"title\": \"image-20211011032746664\",\n    \"src\": \"/tech-share/static/3c95b1b13c4b81b29f0e299b3c9ff7f2/f2793/image-20211011032746664.png\",\n    \"srcSet\": [\"/tech-share/static/3c95b1b13c4b81b29f0e299b3c9ff7f2/e4d6b/image-20211011032746664.png 345w\", \"/tech-share/static/3c95b1b13c4b81b29f0e299b3c9ff7f2/1e043/image-20211011032746664.png 690w\", \"/tech-share/static/3c95b1b13c4b81b29f0e299b3c9ff7f2/f2793/image-20211011032746664.png 743w\"],\n    \"sizes\": \"(max-width: 743px) 100vw, 743px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  }), \"\\n    \")), mdx(\"p\", null, \"Except that, user can sign out during share session and also can join an another session, those logics can implemented by a bunch of if-else statement, but use the state machine can make it straightforward and easy to organize by using a mathematical way.\"), mdx(\"p\", null, \"Besides, by listening the state transition, David easy to add logging and monitor demands.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"transition(currentState, event) {\\n    const nextState = //...\\n\\n    Telemetry.sendEvent(\\n        currentState,\\n        nextState,\\n        event\\n    );\\n\\n    return nextState;\\n}\\n\")), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"544px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"76.52173913043477%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACFUlEQVQ4y5WTy27bMBBF/f+bbrooEHSRTWDUtmzZ1vtNim9SVr7oFqSs2EGAIl1cgBqKhzN3hhshBL4rzgU4I2C0Q900qOsaVVWhquuwppRgY62Fl3MO0zQF+fUaX+TwPk8QrIXkHYahCqCyKpFlGdI8R5bnGBnDxhgTDkkpQQgB5xw+9pCFNRpFFiGOj4hPZ3ClMLlp0fSQ52ysBzqHlhCczmcUZRk2VqD/se867H79QJac0fQ9mOAwWsMoA6M/K5Q8UAKtTShVaAWlVIBqrTHPM+JrgiK9QEZvEE0Dyjmm+R3WTcGONVtn3QKkbAyAybpQImEsfN9uN/R9HzLnWoH2OcrtFvRwgExT6K6DHEf0/RDEGV+AXMkApSPDQEgwV8ol07ftFj0lUM4iqVPESYrTbo/icIDOM7C2RZYXSNMMXddj48v0kD+HPfbHE3ZRhOhywc+XF/x+fUXTdXDe03vHffOUNtB+EqZb8N/7fLst0xG67O5jMwwDpJAYGMMxSXC5JsiLMmS7NuoxSvdGmM/aPHfUQ8k4YhQcQkq8z3Mw2xr75WCAr3EP95cY+wD68dFm2SirGlyID1g4qA2stl9lnh7AM9CXLZREWVXI8wJt12GkIyil0Eo/oPcLgv4FXA2/JlfsDxGiU4yiKJBkWXjHK9B8B/gM9bPn120/fG7G/wBX2IfZ9zGpmxbHUxzKn5z7FvAvzkjjE4AMcHcAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"image-20211011032818722\",\n    \"title\": \"image-20211011032818722\",\n    \"src\": \"/tech-share/static/01a92d96a97c5da3133fa0dfd04d2435/b3e51/image-20211011032818722.png\",\n    \"srcSet\": [\"/tech-share/static/01a92d96a97c5da3133fa0dfd04d2435/e4d6b/image-20211011032818722.png 345w\", \"/tech-share/static/01a92d96a97c5da3133fa0dfd04d2435/b3e51/image-20211011032818722.png 544w\"],\n    \"sizes\": \"(max-width: 544px) 100vw, 544px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  }), \"\\n    \")), mdx(\"p\", null, \"We can easy to see the most frequency event is sign in, then almost the same balance for both share and join session, and also clearly display how many user go to success and error state.\"), mdx(\"h3\", {\n    \"id\": \"you-dont-need-state-machine\"\n  }, \"You don\\u2019t need state machine\"), mdx(\"p\", null, \"You do not need a state machine library (like XState) to do this.\"), mdx(\"p\", null, \"As the author of the code, the event-first (bottom-up) approach might seem fine to you; after all, if it works, it works. One of the main advantages of taking a \\u201Cfinite-state-first\\u201D (top-down) approach and using state machines is that the logic is not only more clear (since it\\u2019s grouped by finite state), it\\u2019s more robust: you can ensure that an event won\\u2019t be improperly handled in a state that it shouldn\\u2019t be handled in. In other words, you prevent \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"impossible states\"), \" and \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"impossible transitions\"), \" without having to litter your code with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"if\"), \"-statements and excessive defensive programming.\"), mdx(\"p\", null, \"I also like to think of state machines as a formal way of communicating logic. If you were describing the above logic, here\\u2019s how it would sound with an event-first approach:\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"When data is received, do something, but only if the \\u201Cloading\\u201D flag is true.\")), mdx(\"p\", null, \"And with a finite-state-first approach:\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"In the \\u201Cloading\\u201D state, when data is received, do something.\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\"\n  }, \"// 'loading' behavior\\nfunction loadingState(state, event) {\\n  // switch only on the event\\n  switch (event.type) {\\n    case 'DATA_RECEIVED':\\n      return {\\n        ...state,\\n        status: 'success'\\n      }\\n    }\\n    // ...\\n  }\\n}\\n\\nfunction dataMachine(state, event) {\\n  switch (state.status) {\\n    case 'loading':\\n      // handle the event with 'loading' behavior\\n      return loadingState(state, event);\\n    }\\n    // ...\\n  }\\n}\\n\")), mdx(\"p\", null, \"This approach is outlined in the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://redux.js.org/style-guide/style-guide/#treat-reducers-as-state-machines\"\n  }, \"Redux style guide recommendation: Treat Reducers as State Machines\"), \". It\\u2019s a very organized approach, and each \\u201Cbehavior function\\u201D can be individually tested, since they are isolated, pure reducers.\"), mdx(\"p\", null, \"Take the DogFetch for example:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\"\n  }, \"function dogReducer(state, event) {\\n   switch (event.status) {\\n       case \\\"loading\\\": {\\n          case \\\"RESOLVE\\\":\\n            return {\\n              ...state,\\n              status: \\\"success\\\",\\n              dog: event.data\\n            };\\n          case \\\"REJECT\\\":\\n            return {\\n              ...state,\\n              status: \\\"failure\\\",\\n              error: event.error\\n            };\\n          case \\\"CANCEL\\\":\\n            return {\\n              ...state,\\n              status: \\\"idle\\\"\\n            };\\n       }\\n       case \\\"success\\\": {\\n          case \\\"FETCH\\\":\\n            return {\\n              ...state,\\n              status: \\\"loading\\\"\\n            };\\n       }\\n       case \\\"failure\\\": {\\n          case \\\"FETCH\\\":\\n            return {\\n              ...state,\\n              status: \\\"loading\\\"\\n            };\\n       }\\n       case \\\"idle\\\": {\\n            case \\\"FETCH\\\":\\n              return {\\n                ...state,\\n                status: \\\"loading\\\"\\n              };\\n       }\\n   }\\n}\\n\")), mdx(\"p\", null, \"Even you can just use a object to handle looks like this:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"const machine = {\\n    initial: 'idle',\\n    states: {\\n        idle: {\\n            on: { SEARCH: 'searching' },\\n        },\\n        searching: {\\n            on: {\\n                RESOLVE: 'success',\\n                REJECT: 'failure',\\n                SEARCH: 'searching'\\n            }\\n        },\\n        success: {\\n            on: { SEARCH: 'searching' }\\n        },\\n        failure: {\\n            on: { SEARCH: 'searching' }\\n        }\\n    }\\n};\\n\\nfunction transition(state, event) {\\n    return machine.states[state].on[event];\\n}\\n\")), mdx(\"p\", null, \"In fact, you might not even need \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useReducer\"), \" when you\\u2019re first adopting these principles. Even something as simple as having a state variable representing a finite state can already clean up your logic plenty:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\"\n  }, \"function DogFetcher() {\\n  // 'idle' or 'loading' or 'success' or 'error'\\n  const [status, setStatus] = useState('idle');\\n}\\n\")), mdx(\"p\", null, \"And just like that, you\\u2019ve eliminated \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"isLoading\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"isError\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"isSuccess\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"startedLoading\"), \", and whatever Boolean flags you were going to create. And if you really start to miss that \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"isLoading\"), \" flag (for whatever reason), you can still have it, but ONLY if it\\u2019s derived from your organized, finite states. The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"isLoading\"), \" variable should NEVER be a primary source of state:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\"\n  }, \"function DogFetcher() {\\n  // 'idle' or 'loading' or 'success' or 'error'\\n  const [status, setStatus] = useState('idle');\\n\\n  const isLoading = status === 'loading';\\n\\n  return (\\n    // ...\\n    <button disabled={isLoading}>\\n      {/* ... */}\\n    </button>\\n    // ...\\n  );\\n}\\n\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Why we need a library like XState?\")), mdx(\"p\", null, \"Because State Machine is not enough.\"), mdx(\"h3\", {\n    \"id\": \"state-charts\"\n  }, \"State charts\"), mdx(\"p\", null, \"State charts are a formalism for modeling stateful, reactive systems. Computer scientist David Harel presented this formalism as an extension to state machines in his 1987 paper \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.sciencedirect.com/science/article/pii/0167642387900359/pdf\"\n  }, \"Statecharts: A Visual Formalism for Complex Systems\"), \". Standars: \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.w3.org/TR/scxml\"\n  }, \"W3 SCXML (Statechart XML) spec\"), \".\"), mdx(\"p\", null, \"Recommend learning material:\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://statecharts.dev/\"\n  }, \"https://statecharts.dev/\")), mdx(\"p\", null, \"State charts extended from state machines, which include \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"hierarchical\"), \" or \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"nested\"), \" states \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"orthogonal\"), \" or parallel states, history , \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"entry/exit\"), \" actions on transitions and a lot more, especially solve state explosion(\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://statecharts.dev/state-machine-state-explosion.html\"\n  }, \"https://statecharts.dev/state-machine-state-explosion.html\"), \") that happens as state machines grow.\"), mdx(\"p\", null, \"You can think of statecharts as essentially being state machines (statecharts can be decomposed into FSMs) with some essential features for better state organization and real-world use-cases:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Hierarchy\"), \" (nested states)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Orthogonality\"), \" (parallel states)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"History\"), \" (remembered states)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"State actions\"), \" (entry, exit)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Guarded transitions\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Extended state\"), \" (contextual data)\")), mdx(\"p\", null, \"More Details: \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://statecharts.dev/what-is-a-statechart.html\"\n  }, \"https://statecharts.dev/what-is-a-statechart.html\")), mdx(\"p\", null, \"Overall, the features of statecharts are very useful in many different situations:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Nested states\"), \" are useful for grouping and refining behavior. Different \\u201Cfinite states\\u201D can all share behavior, while all having their own specific behavior.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Parallel states\"), \" are useful for representing behaviors that can occur simultaneously, without directly affecting each other.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"History states\"), \" are useful for recalling which nested state the machine was previously in without having to specify all the possible \\u201Cremembering\\u201D transitions.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"State actions\"), \" are useful for specifying actions that should always be executed on any transition that enters/exits a state without having to specify those actions in all incoming/outgoing transitions.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Guarded transitions\"), \" are very important for conditionally taking transitions based on more than just the state and event type. They can take other data (extended state) and/or event data into consideration, as well.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Extended state\"), \" is absolutely necessary. Not all state is finite; \\u201Cinfinite\\u201D state also needs to be quantified. Statecharts allow you to distinguish between finite and extended state.\")), mdx(\"p\", null, \"There\\u2019s even more features of classic statecharts, such as \\u201Cactivities\\u201D (actions that occur \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"throughout\"), \" a state), delays, eventless transitions, wildcard transitions, and more. And the more you work with statecharts, the more you realize just how essential most of these features actually are.\"), mdx(\"p\", null, \"Examples:\"), mdx(\"p\", null, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://statecharts.dev/on-off-statechart.html\"\n  }, \"A simple on-off statechart\")), mdx(\"p\", null, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://realfiction.net/2019/01/30/xstate-a-typescript-state-machine-with-a-lot-of-features\"\n  }, \"Video Control\")), mdx(\"p\", null, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://xstate-catalogue.com/\"\n  }, \"https://xstate-catalogue.com/\")), mdx(\"p\", null, \"And you can see the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://codesandbox.io/s/xstate-vue-minute-timer-viz-1txmk\"\n  }, \"inspect\"), \" tool also helper.\"), mdx(\"h3\", {\n    \"id\": \"do-we-need-a-library-for-statecharts\"\n  }, \"Do we need a library for statecharts?\"), mdx(\"p\", null, \"Yes.\"), mdx(\"h3\", {\n    \"id\": \"closing-thoughts\"\n  }, \"Closing thoughts\"), mdx(\"p\", null, \"If you\\u2019re satisfied manipulating state at any time and sprinkling \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"if\"), \"-statements to patch up edge-cases, you probably don\\u2019t need explicit state machines.\"), mdx(\"p\", null, \"If you want to use simple state machines to help organize app behavior and logic, you don\\u2019t need a library.\"), mdx(\"p\", null, \"If you have complex logic and want to take advantage of more powerful state machine features to better manage this logic, you need statecharts.\"), mdx(\"p\", null, \"And you \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"definitely\"), \" need a library for statecharts.\"), mdx(\"p\", null, \"The future of UI Interface, especially comes with React 18.\"), mdx(\"p\", null, \"Introduce mathematical model to complex logic software.\"), mdx(\"h3\", {\n    \"id\": \"reference\"\n  }, \"Reference\"), mdx(\"p\", null, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://en.wikipedia.org/wiki/Finite-state_machine\"\n  }, \"https://en.wikipedia.org/wiki/Finite-state_machine\"), \"\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://statecharts.dev/\"\n  }, \"https://statecharts.dev/\"), \"\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://medium.com/@asolove/pure-ui-control-ac8d1be97a8d\"\n  }, \"https://medium.com/@asolove/pure-ui-control-ac8d1be97a8d\"), \"\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://slides.com/davidkhourshid/finite-state-machines\"\n  }, \"http://slides.com/davidkhourshid/finite-state-machines\"), \"\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://dev.to/davidkpiano/no-disabling-a-button-is-not-app-logic-598i\"\n  }, \"https://dev.to/davidkpiano/no-disabling-a-button-is-not-app-logic-598i\"), \"\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://www.ayqy.net/blog/render-as-you-fetch/\"\n  }, \"http://www.ayqy.net/blog/render-as-you-fetch/\"), \"\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://reactjs.org/blog/2019/11/06/building-great-user-experiences-with-concurrent-mode-and-suspense.html\"\n  }, \"https://reactjs.org/blog/2019/11/06/building-great-user-experiences-with-concurrent-mode-and-suspense.html\"), \"\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://dev.to/davidkpiano/you-don-t-need-a-library-for-state-machines-k7h\"\n  }, \"https://dev.to/davidkpiano/you-don-t-need-a-library-for-state-machines-k7h\"), \"\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://mp.weixin.qq.com/s/QeUwB_2mwhD4KWNyJsbojg\"\n  }, \"https://mp.weixin.qq.com/s/QeUwB_2mwhD4KWNyJsbojg\"), \"\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://redux.js.org/style-guide/style-guide/#treat-reducers-as-state-machines\"\n  }, \"https://redux.js.org/style-guide/style-guide/#treat-reducers-as-state-machines\"), \"\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://statecharts.dev/state-machine-state-explosion.html\"\n  }, \"https://statecharts.dev/state-machine-state-explosion.html\"), \"\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://realfiction.net/2019/01/30/xstate-a-typescript-state-machine-with-a-lot-of-features\"\n  }, \"http://realfiction.net/2019/01/30/xstate-a-typescript-state-machine-with-a-lot-of-features\"), \"\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://xstate-catalogue.com/\"\n  }, \"https://xstate-catalogue.com/\"), \"\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://stately.ai/viz\"\n  }, \"https://stately.ai/viz\"), \"\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://xstate.js.org/docs/about/resources.html\"\n  }, \"https://xstate.js.org/docs/about/resources.html\"), \"\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://xstate.js.org/docs/\"\n  }, \"https://xstate.js.org/docs/\"), \"\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://stately.ai/viz/33fd92e1-f9e6-49e6-bdeb-cef9e60195ec\"\n  }, \"https://stately.ai/viz/33fd92e1-f9e6-49e6-bdeb-cef9e60195ec\")), mdx(\"h3\", {\n    \"id\": \"video-recommendation\"\n  }, \"Video Recommendation:\"), mdx(\"p\", null, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.youtube.com/watch?v=4Mue0Qr_apE&t=420s\"\n  }, \"https://www.youtube.com/watch?v=4Mue0Qr_apE&t=420s\"), \"\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.youtube.com/watch?v=uLlQjp5u2KQ&t=18s\"\n  }, \"https://www.youtube.com/watch?v=uLlQjp5u2KQ&t=18s\"), \"\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.youtube.com/watch?v=VU1NKX6Qkxc\"\n  }, \"https://www.youtube.com/watch?v=VU1NKX6Qkxc\")));\n}\n;\nMDXContent.isMDXComponent = true;","slug":"/XState/","title":"XState","tags":[],"date":"October 10, 2021","image":null,"imageAlt":null,"imageCaptionText":null,"imageCaptionLink":null,"socialImage":null},"previous":null,"next":null},"pageContext":{"id":"a4ac6232-d4e2-571e-9072-9104f87e2a8c","maxWidth":1380}},
    "staticQueryHashes": ["2744905544","3090755652","3308536712","764694655"]}